{% extends 'base.html' %}

{% block content %}

<div id="post-control">
  <form
    id="post-control-form"
    hx-post="/post"
    hx-target="#post-listing"
    hx-swap="afterbegin"
    hx-on::after-request="resetForm()"
  >
    <textarea name="post-content"></textarea>
    <button>Post</button>
  </form>
</div>

<div id="post-listing">
  {% for post in posts %}
  <article class="post">
    <div class="post-header">
      <span class="post-author">{{ post.author }}</span>
      <span class="post-handle">{{ post.handle }}</span>
      &bull;
      <span class="post-date">{{ post.created_display }}</span>
    </div>
    <div class="post-content">{{ post.content }}</div>
  </article>
  {% endfor %}
</div>

{% endblock %}
